<ng-container *ngIf="to.options | formlySelectOptions: field | async as selectOptions">
    <input type="text"
    matInput
    #input
    [matAutocomplete]="auto"
    [formControl]="control"
    [formlyAttributes]="field"
    [placeholder]="to.placeholder ?? ''"
    [required]="to.required ?? false"
    [errorStateMatcher]="errorStateMatcher"
    [options]="selectOptions"
    entryCheckAutocompleteInput>
  <mat-autocomplete #auto="matAutocomplete"
    [autoActiveFirstOption]="true"
    [displayWith]="selectOptions | displayWithAutocomplete">
    <mat-option *ngFor="let option of selectOptions | filterWithAutocomplete: input.value" [value]="option.value">
    {{ option.label }}
    </mat-option>
  </mat-autocomplete>
</ng-container>
