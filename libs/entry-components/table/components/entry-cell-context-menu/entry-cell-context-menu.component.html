@if(!isSubMenu())
{
    <button mat-icon-button [matMenuTriggerFor]="menu" (click)="$event.stopPropagation()">
        <mat-icon>{{triggerIcon()}}</mat-icon>
    </button>
}

<mat-menu #menu="matMenu" class="entry-table-menu" role="menu">
    @for(menuItem of menuItems(); track menuItem.id)
    {
        <button mat-menu-item [disabled]="menuItem.disabled"
            [matMenuTriggerFor]="menuItem.items?.length ? (subMenu()?.menu() ?? null) : null"
            (click)="!menuItem.items?.length && selected.emit(menuItem.id)" class="context-menu-item">

            @if(menuItem.icon)
            {
                <mat-icon class="icon">{{menuItem.icon}}</mat-icon>
            }

            <span class="description">{{menuItem.name}}</span>

            @if(menuItem.items?.length)
            {
                <entry-cell-context-menu #subMenu [items]="menuItem.items ?? []" [rowData]="rowData" [isSubMenu]="true"
                    (selected)="selected.emit($event)">
                </entry-cell-context-menu>
            }
        </button>
    }
</mat-menu>