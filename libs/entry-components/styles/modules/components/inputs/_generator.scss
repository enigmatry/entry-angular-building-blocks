/* stylelint-disable max-nesting-depth, @stylistic/max-line-length */
@use 'sass:map';

$focused-label: '.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label, .mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label';
$disabled-field: '.mdc-text-field--filled.mdc-text-field--disabled, .mdc-text-field--outlined.mdc-text-field--disabled';
$disabled-outline-border: '.mat-mdc-notch-piece';

@mixin generate-from($theme) {
	$input-background: map.get($theme, 'general', 'inputs', 'background');
	$input-hover-background: map.get($theme, 'general', 'inputs', 'hover-background');
	$label-focus-color: map.get($theme, 'general', 'inputs', 'label-focus-color');
	$arrow-focus-color: map.get($theme, 'general', 'inputs', 'arrow-focus-color');
	$disabled-color: map.get($theme, 'general', 'inputs', 'disabled', 'color');
	$disabled-background: map.get($theme, 'general', 'inputs', 'disabled', 'background-color');
	$disabled-border: map.get($theme, 'general', 'inputs', 'disabled', 'border-color');

	.mat-mdc-form-field {
		@if $input-background {
			.mat-mdc-text-field-wrapper.mdc-text-field {
				background-color: $input-background;

				&.mdc-text-field--outlined {
					border-radius: 4px;
				}
			}
		}

		@if $input-hover-background {
			.mat-mdc-form-field-focus-overlay {
				background-color: $input-hover-background;
			}
		}

		@if $label-focus-color {
			#{$focused-label} {
				color: $label-focus-color;
			}
		}

		@if $arrow-focus-color {
			&.mat-focused .mat-mdc-select-arrow-wrapper .mat-mdc-select-arrow {
				color: $arrow-focus-color;
			}
		}

		@if $disabled-color or $disabled-background or $disabled-border {
			#{$disabled-field} {
				@if $disabled-background {
					background-color: $disabled-background;
				}

				@if $disabled-color {
					.mdc-floating-label, .mdc-text-field__input {
						color: $disabled-color;
					}
				}

				@if $disabled-border {
					.mdc-line-ripple::before {
						border-bottom-color: $disabled-border;
					}
					#{$disabled-outline-border} {
						border-color: $disabled-border;
					}
				}
			}
		}
	}

	@if $input-hover-background {
		.mat-mdc-form-field .mat-mdc-form-field-focus-overlay {
			background-color: $input-hover-background;
		}
	}

	@if $label-focus-color {
		#{$focused-label} {
			color: $label-focus-color;
		}
	}

	@if $arrow-focus-color {
		.mat-mdc-form-field.mat-focused .mat-mdc-select-arrow-wrapper .mat-mdc-select-arrow {
			color: $arrow-focus-color;
		}
	}

	@if $disabled-color or $disabled-background or $disabled-border {
		#{$disabled-field} {
			@if $disabled-background {
				background-color: $disabled-background;
			}

			@if $disabled-color {
				.mdc-floating-label {
					color: $disabled-color;
				}
			}

			@if $disabled-border {
				.mdc-line-ripple::before {
					border-bottom-color: $disabled-border;
				}

				#{$disabled-outline-border} {
					border-color: $disabled-border;
				}
			}
		}
	}
}