@use 'sass:map';
@use '@angular/material' as mat;
@use 'scss-foundation/src/modules/lists/row-coloring' as list;

$redactor-th-selector: 'thead th';
$body-typography: map.get(mat.define-typography-config(), 'body-1');
$caption-typography: map.get(mat.define-typography-config(), 'caption');

@mixin generate-from($theme) {
	$theming-table: map.get($theme, 'tables', 'rows', 'odd-even-background');
	$theming-table-header: map.get($theme, 'tables', 'header', 'font-size');
	$theming-fonts: map.get($theme, 'general', 'fonts');
	$body-font-family: map.get($theme, 'general', 'fonts', 'body', 'family');

	.enigmatry-redactor-content {
		table {
			@if $theming-table {
				tr {
					@include list.odd-row-coloring(map.get($theming-table, 'odd'));
					@include list.even-row-coloring(map.get($theming-table, 'even'));
				}
			}
			@else {
				tr {
					@include list.even-row-coloring(mat.get-color-from-palette(mat.$grey-palette, 100));
					@include list.odd-row-coloring(mat.get-color-from-palette(mat.$grey-palette, 50));
				}
			}

			@if $theming-table-header {
				th {
					font-family: $body-font-family;
					font-size: $theming-table-header;
				}
			}
		}

		table, table td {
			$body-size: if($theming-fonts != null, map.get($theming-fonts, 'body', 'size'), null);

			@if $body-size {
				font-size: $body-size;
			}
			@else {
				font-size: map.get($body-typography, 'font-size');
			}

			#{$redactor-th-selector} {
				$header-font-size: map.get($theme, 'tables', 'header', 'font-size');

				@if $header-font-size {
					font-size: $header-font-size;
				}
				@else {
					font-size: map.get($caption-typography, 'font-size');
				}
			}
		}
	}
}